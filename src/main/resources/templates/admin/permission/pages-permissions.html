<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
     <!-- Title Meta -->
     <meta charset="utf-8" />
     <title>Qu·∫£n L√Ω Quy·ªÅn | H·ªá Th·ªëng Qu·∫£n L√Ω</title>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="A fully responsive premium admin dashboard template" />
     <meta name="author" content="Techzaa" />
     <meta http-equiv="X-UA-Compatible" content="IE=edge" />

     <!-- App favicon -->
     <link rel="shortcut icon" th:href="@{/assets/images/favicon.ico}">

     <!-- Vendor css (Require in all Page) -->
     <link th:href="@{/assets/css/vendor.min.css}" rel="stylesheet" type="text/css" />

     <!-- Icons css (Require in all Page) -->
     <link th:href="@{/assets/css/icons.min.css}" rel="stylesheet" type="text/css" />

     <!-- App css (Require in all Page) -->
     <link th:href="@{/assets/css/app.min.css}" rel="stylesheet" type="text/css" />

     <!-- Theme Config js (Require in all Page) -->
     <script th:src="@{/assets/js/config.js}"></script>

     
     <style>
         
         /* Hi·ªáu ·ª©ng cho card */
         .card {
             transition: all 0.3s ease;
             box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
         }
         
         .card:hover {
             transform: translateY(-5px);
             box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
         }
         
         /* Hi·ªáu ·ª©ng cho table */
         .table {
             transition: all 0.3s ease;
         }
         
         .table tbody tr {
             transition: all 0.3s ease;
         }
         
         .table tbody tr:hover {
             background-color: rgba(13, 110, 253, 0.05);
             transform: scale(1.01);
             box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
         }
         
         /* Hi·ªáu ·ª©ng cho buttons */
         .btn {
             transition: all 0.3s ease;
             position: relative;
             overflow: hidden;
         }
         
         .btn:hover {
             transform: translateY(-2px);
             box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
         }
         
         .btn:active {
             transform: translateY(0);
         }
         
         /* Hi·ªáu ·ª©ng cho form controls */
         .form-control, .form-select {
             transition: all 0.3s ease;
             border: 2px solid #e9ecef;
         }
         
         .form-control:focus, .form-select:focus {
             border-color: #0d6efd;
             box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
             transform: scale(1.02);
         }
         
         /* Hi·ªáu ·ª©ng cho badges */
         .badge {
             transition: all 0.3s ease;
         }
         
         .badge:hover {
             transform: scale(1.1);
         }
         
         /* Hi·ªáu ·ª©ng cho pagination */
         .pagination .page-link {
             transition: all 0.3s ease;
         }
         
         .pagination .page-link:hover {
             transform: translateY(-2px);
             box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
         }
         
         /* Hi·ªáu ·ª©ng loading cho AJAX */
         .loading {
             position: relative;
             pointer-events: none;
         }
         
         .loading::after {
             content: '';
             position: absolute;
             top: 50%;
             left: 50%;
             width: 20px;
             height: 20px;
             margin: -10px 0 0 -10px;
             border: 2px solid #f3f3f3;
             border-top: 2px solid #0d6efd;
             border-radius: 50%;
             animation: spin 1s linear infinite;
         }
         
         @keyframes spin {
             0% { transform: rotate(0deg); }
             100% { transform: rotate(360deg); }
         }
         
         /* Hi·ªáu ·ª©ng cho search v√† filter */
         .mb-3 {
             transition: all 0.3s ease;
         }
         
         .mb-3:hover {
             transform: translateY(-2px);
         }
         
         /* Hi·ªáu ·ª©ng cho table header */
         .table thead th {
             transition: all 0.3s ease;
             position: relative;
         }
         
         .table thead th:hover {
             background-color: rgba(13, 110, 253, 0.1);
         }
         
         /* Hi·ªáu ·ª©ng cho action buttons */
         .d-flex.gap-2 .btn {
             transition: all 0.3s ease;
         }
         
         .d-flex.gap-2 .btn:hover {
             transform: scale(1.1);
         }
     </style>

     <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

</head>

<body>

<!-- START Wrapper -->
<div class="wrapper">

     <!-- ========== Topbar Start ========== -->
     <header class="topbar">
          <div class="container-fluid">
               <div class="navbar-header">
                    <div class="d-flex align-items-center">
                         <!-- Menu Toggle Button -->
                         <div class="topbar-item">
                              <button type="button" class="button-toggle-menu me-2">
                                   <iconify-icon icon="solar:hamburger-menu-broken" class="fs-24 align-middle"></iconify-icon>
                              </button>
                         </div>

                         <!-- Menu Toggle Button -->
                         <div class="topbar-item">
                              <h4 class="fw-bold topbar-button pe-none text-uppercase mb-0">Qu·∫£n L√Ω Quy·ªÅn</h4>
                         </div>
                    </div>

                    <div class="d-flex align-items-center gap-1">

                         <!-- Theme Color (Light/Dark) -->
                         <div class="topbar-item">
                              <button type="button" class="topbar-button" id="light-dark-mode">
                                   <iconify-icon icon="solar:moon-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                              </button>
                         </div>

                         <!-- Notification -->
                         <div class="dropdown topbar-item">
                              <button type="button" class="topbar-button position-relative" id="page-header-notifications-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                   <iconify-icon icon="solar:bell-bing-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                                   <span class="position-absolute topbar-badge fs-10 translate-middle badge bg-danger rounded-pill">3<span class="visually-hidden">unread messages</span></span>
                              </button>
                              <div class="dropdown-menu py-0 dropdown-lg dropdown-menu-end" aria-labelledby="page-header-notifications-dropdown">
                                   <div class="p-3 border-top-0 border-start-0 border-end-0 border-dashed border">
                                        <div class="row align-items-center">
                                             <div class="col">
                                                  <h6 class="m-0 fs-16 fw-semibold"> Notifications</h6>
                                             </div>
                                             <div class="col-auto">
                                                  <a href="javascript: void(0);" class="text-dark text-decoration-underline">
                                                       <small>Clear All</small>
                                                  </a>
                                             </div>
                                        </div>
                                   </div>
                                   <div data-simplebar style="max-height: 280px;">
                                        <!-- Item -->
                                        <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom text-wrap">
                                             <div class="d-flex">
                                                  <div class="flex-shrink-0">
                                                       <img src="/assets/images/users/avatar-1.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-1" />
                                                  </div>
                                                  <div class="flex-grow-1">
                                                       <p class="mb-0"><span class="fw-medium">Josephine Thompson </span>commented on admin panel <span>" Wow üòç! this admin looks good and awesome design"</span></p>
                                                  </div>
                                             </div>
                                        </a>
                                        <!-- Item -->
                                        <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                             <div class="d-flex">
                                                  <div class="flex-shrink-0">
                                                       <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-info text-info fs-20 rounded-circle">
                                                                      D
                                                                 </span>
                                                       </div>
                                                  </div>
                                                  <div class="flex-grow-1">
                                                       <p class="mb-0 fw-semibold">Donoghue Susan</p>
                                                       <p class="mb-0 text-wrap">
                                                            Hi, How are you? What about our next meeting
                                                       </p>
                                                  </div>
                                             </div>
                                        </a>
                                        <!-- Item -->
                                        <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                             <div class="d-flex">
                                                  <div class="flex-shrink-0">
                                                       <img src="/assets/images/users/avatar-3.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-3" />
                                                  </div>
                                                  <div class="flex-grow-1">
                                                       <p class="mb-0 fw-semibold">Jacob Gines</p>
                                                       <p class="mb-0 text-wrap">Answered to your comment on the cash flow forecast's graph üîî.</p>
                                                  </div>
                                             </div>
                                        </a>
                                        <!-- Item -->
                                        <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                             <div class="d-flex">
                                                  <div class="flex-shrink-0">
                                                       <div class="avatar-sm me-2">
                                                                 <span class="avatar-title bg-soft-warning text-warning fs-20 rounded-circle">
                                                                      <iconify-icon icon="iconamoon:comment-dots-duotone"></iconify-icon>
                                                                 </span>
                                                       </div>
                                                  </div>
                                                  <div class="flex-grow-1">
                                                       <p class="mb-0 fw-semibold text-wrap">You have received <b>20</b> new messages in the
                                                            conversation</p>
                                                  </div>
                                             </div>
                                        </a>
                                        <!-- Item -->
                                        <a href="javascript:void(0);" class="dropdown-item py-3 border-bottom">
                                             <div class="d-flex">
                                                  <div class="flex-shrink-0">
                                                       <img src="/assets/images/users/avatar-5.jpg" class="img-fluid me-2 avatar-sm rounded-circle" alt="avatar-5" />
                                                  </div>
                                                  <div class="flex-grow-1">
                                                       <p class="mb-0 fw-semibold">Shawn Bunch</p>
                                                       <p class="mb-0 text-wrap">
                                                            Commented on Admin
                                                       </p>
                                                  </div>
                                             </div>
                                        </a>
                                   </div>
                                   <div class="text-center py-3">
                                        <a href="javascript:void(0);" class="btn btn-primary btn-sm">View All Notification <i class="bx bx-right-arrow-alt ms-1"></i></a>
                                   </div>
                              </div>
                         </div>

                         <!-- Theme Setting -->
                         <div class="topbar-item d-none d-md-flex">
                              <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-settings-offcanvas" aria-controls="theme-settings-offcanvas">
                                   <iconify-icon icon="solar:settings-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                              </button>
                         </div>

                         <!-- Activity -->
                         <div class="topbar-item d-none d-md-flex">
                              <button type="button" class="topbar-button" id="theme-settings-btn" data-bs-toggle="offcanvas" data-bs-target="#theme-activity-offcanvas" aria-controls="theme-settings-offcanvas">
                                   <iconify-icon icon="solar:clock-circle-bold-duotone" class="fs-24 align-middle"></iconify-icon>
                              </button>
                         </div>

                         <!-- User -->
                         <div class="dropdown topbar-item">
                              <a type="button" class="topbar-button" id="page-header-user-dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span class="d-flex align-items-center">
                                             <img class="rounded-circle" width="32" src="/assets/images/users/avatar-1.jpg" alt="avatar-3">
                                        </span>
                              </a>
                              <div class="dropdown-menu dropdown-menu-end">
                                   <!-- item-->
                                   <h6 class="dropdown-header">Welcome Gaston!</h6>
                                   <a class="dropdown-item" href="pages-profile.html">
                                        <i class="bx bx-user-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Profile</span>
                                   </a>
                                   <a class="dropdown-item" href="apps-chat.html">
                                        <i class="bx bx-message-dots text-muted fs-18 align-middle me-1"></i><span class="align-middle">Messages</span>
                                   </a>

                                   <a class="dropdown-item" href="pages-pricing.html">
                                        <i class="bx bx-wallet text-muted fs-18 align-middle me-1"></i><span class="align-middle">Pricing</span>
                                   </a>
                                   <a class="dropdown-item" href="pages-faqs.html">
                                        <i class="bx bx-help-circle text-muted fs-18 align-middle me-1"></i><span class="align-middle">Help</span>
                                   </a>
                                   <a class="dropdown-item" href="auth-lock-screen.html">
                                        <i class="bx bx-lock text-muted fs-18 align-middle me-1"></i><span class="align-middle">Lock screen</span>
                                   </a>

                                   <div class="dropdown-divider my-1"></div>

                                   <a class="dropdown-item text-danger" href="auth-signin.html">
                                        <i class="bx bx-log-out fs-18 align-middle me-1"></i><span class="align-middle">Logout</span>
                                   </a>
                              </div>
                         </div>

                         <!-- App Search-->
                         <form class="app-search d-none d-md-block ms-2">
                              <div class="position-relative">
                                   <input type="search" class="form-control" placeholder="Search..." autocomplete="off" value="">
                                   <iconify-icon icon="solar:magnifer-linear" class="search-widget-icon"></iconify-icon>
                              </div>
                         </form>
                    </div>
               </div>
          </div>
     </header>

     <!-- Activity Timeline -->
     <div>
          <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-activity-offcanvas" style="max-width: 450px; width: 100%;">
               <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                    <h5 class="text-white m-0 fw-semibold">Activity Stream</h5>
                    <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
               </div>

               <div class="offcanvas-body p-0">
                    <div data-simplebar class="h-100 p-4">
                         <div class="position-relative ms-2">
                              <span class="position-absolute start-0  top-0 border border-dashed h-100"></span>
                              <div class="position-relative ps-4">
                                   <div class="mb-4">
                                        <span class="position-absolute start-0 avatar-sm translate-middle-x bg-danger d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:folder-check-duotone"></iconify-icon></span>
                                        <div class="ms-2">
                                             <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Report-Fix / Update </h5>
                                             <p class="d-flex align-items-center">Add 3 files to <span class=" d-flex align-items-center text-primary ms-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Tasks</span></p>
                                             <div class="bg-light bg-opacity-50 rounded-2 p-2">
                                                  <div class="row">
                                                       <div class="col-lg-6 border-end border-light">
                                                            <div class="d-flex align-items-center gap-2">
                                                                 <i class="bx bxl-figma fs-20 text-red"></i>
                                                                 <a href="#!" class="text-dark fw-medium">Concept.fig</a>
                                                            </div>
                                                       </div>
                                                       <div class="col-lg-6">
                                                            <div class="d-flex align-items-center gap-2">
                                                                 <i class="bx bxl-file-doc fs-20 text-success"></i>
                                                                 <a href="#!" class="text-dark fw-medium">larkon.docs</a>
                                                            </div>
                                                       </div>
                                                  </div>
                                             </div>
                                             <h6 class="mt-2 text-muted">Monday , 4:24 PM</h6>
                                        </div>
                                   </div>
                              </div>
                              <div class="position-relative ps-4">
                                   <div class="mb-4">
                                        <span class="position-absolute start-0 avatar-sm translate-middle-x bg-success d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:check-circle-1-duotone"></iconify-icon></span>
                                        <div class="ms-2">
                                             <h5 class="mb-1 text-dark fw-semibold fs-15 lh-base">Project Status
                                             </h5>
                                             <p class="d-flex align-items-center mb-0">Marked<span class=" d-flex align-items-center text-primary mx-1"><iconify-icon icon="iconamoon:file-light"></iconify-icon> Design </span> as <span class="badge bg-success-subtle text-success px-2 py-1 ms-1"> Completed</span></p>
                                             <div class="d-flex align-items-center gap-3 mt-1 bg-light bg-opacity-50 p-2 rounded-2">
                                                  <a href="#!" class="fw-medium text-dark">UI/UX Figma Design</a>
                                                  <div class="ms-auto">
                                                       <a href="#!" class="fw-medium text-primary fs-18" data-bs-toggle="tooltip" data-bs-title="Download" data-bs-placement="bottom"><iconify-icon icon="iconamoon:cloud-download-duotone"></iconify-icon></a>
                                                  </div>
                                             </div>
                                             <h6 class="mt-3 text-muted">Monday , 3:00 PM</h6>
                                        </div>
                                   </div>
                              </div>
                              <div class="position-relative ps-4">
                                   <div class="mb-4">
                                        <span class="position-absolute start-0 avatar-sm translate-middle-x bg-primary d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-16">UI</span>
                                        <div class="ms-2">
                                             <h5 class="mb-1 text-dark fw-semibold fs-15">Larkon Application UI v2.0.0 <span class="badge bg-primary-subtle text-primary px-2 py-1 ms-1"> Latest</span>
                                             </h5>
                                             <p>Get access to over 20+ pages including a dashboard layout, charts, kanban board, calendar, and pre-order E-commerce & Marketing pages.</p>
                                             <div class="mt-2">
                                                  <a href="#!" class="btn btn-light btn-sm">Download Zip</a>
                                             </div>
                                             <h6 class="mt-3 text-muted">Monday , 2:10 PM</h6>
                                        </div>
                                   </div>
                              </div>
                              <div class="position-relative ps-4">
                                   <div class="mb-4">
                                        <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-7.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                        <div class="ms-2">
                                             <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Alex Smith Attached Photos
                                             </h5>
                                             <div class="row g-2 mt-2">
                                                  <div class="col-lg-4">
                                                       <a href="#!">
                                                            <img src="/assets/images/small/img-6.jpg" alt="" class="img-fluid rounded">
                                                       </a>
                                                  </div>
                                                  <div class="col-lg-4">
                                                       <a href="#!">
                                                            <img src="/assets/images/small/img-3.jpg" alt="" class="img-fluid rounded">
                                                       </a>
                                                  </div>
                                                  <div class="col-lg-4">
                                                       <a href="#!">
                                                            <img src="/assets/images/small/img-4.jpg" alt="" class="img-fluid rounded">
                                                       </a>
                                                  </div>
                                             </div>
                                             <h6 class="mt-3 text-muted">Monday 1:00 PM</h6>
                                        </div>
                                   </div>
                              </div>
                              <div class="position-relative ps-4">
                                   <div class="mb-4">
                                        <span class="position-absolute start-0 translate-middle-x bg-success bg-gradient d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><img src="/assets/images/users/avatar-6.jpg" alt="avatar-5" class="avatar-sm rounded-circle"></span>
                                        <div class="ms-2">
                                             <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Rebecca J. added a new team member
                                             </h5>
                                             <p class="d-flex align-items-center gap-1"><iconify-icon icon="iconamoon:check-circle-1-duotone" class="text-success"></iconify-icon> Added a new member to Front Dashboard</p>
                                             <h6 class="mt-3 text-muted">Monday 10:00 AM</h6>
                                        </div>
                                   </div>
                              </div>
                              <div class="position-relative ps-4">
                                   <div class="mb-4">
                                        <span class="position-absolute start-0 avatar-sm translate-middle-x bg-warning d-inline-flex align-items-center justify-content-center rounded-circle text-light fs-20"><iconify-icon icon="iconamoon:certificate-badge-duotone"></iconify-icon></span>
                                        <div class="ms-2">
                                             <h5 class="mb-0 text-dark fw-semibold fs-15 lh-base">Achievements
                                             </h5>
                                             <p class="d-flex align-items-center gap-1 mt-1">Earned a <iconify-icon icon="iconamoon:certificate-badge-duotone" class="text-danger fs-20"></iconify-icon>" Best Product Award"</p>
                                             <h6 class="mt-3 text-muted">Monday 9:30 AM</h6>
                                        </div>
                                   </div>
                              </div>
                         </div>
                         <a href="#!" class="btn btn-outline-dark w-100">View All</a>
                    </div>
               </div>
          </div>
     </div>

     <!-- Right Sidebar (Theme Settings) -->
     <div>
          <div class="offcanvas offcanvas-end border-0" tabindex="-1" id="theme-settings-offcanvas">
               <div class="d-flex align-items-center bg-primary p-3 offcanvas-header">
                    <h5 class="text-white m-0">Theme Settings</h5>
                    <button type="button" class="btn-close btn-close-white ms-auto" data-bs-dismiss="offcanvas" aria-label="Close"></button>
               </div>

               <div class="offcanvas-body p-0">
                    <div data-simplebar class="h-100">
                         <div class="p-3 settings-bar">

                              <div>
                                   <h5 class="mb-3 font-16 fw-semibold">Color Scheme</h5>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-light" value="light">
                                        <label class="form-check-label" for="layout-color-light">Light</label>
                                   </div>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-bs-theme" id="layout-color-dark" value="dark">
                                        <label class="form-check-label" for="layout-color-dark">Dark</label>
                                   </div>
                              </div>

                              <div>
                                   <h5 class="my-3 font-16 fw-semibold">Topbar Color</h5>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-light" value="light">
                                        <label class="form-check-label" for="topbar-color-light">Light</label>
                                   </div>
                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-topbar-color" id="topbar-color-dark" value="dark">
                                        <label class="form-check-label" for="topbar-color-dark">Dark</label>
                                   </div>
                              </div>


                              <div>
                                   <h5 class="my-3 font-16 fw-semibold">Menu Color</h5>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-light" value="light">
                                        <label class="form-check-label" for="leftbar-color-light">
                                             Light
                                        </label>
                                   </div>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-menu-color" id="leftbar-color-dark" value="dark">
                                        <label class="form-check-label" for="leftbar-color-dark">
                                             Dark
                                        </label>
                                   </div>
                              </div>

                              <div>
                                   <h5 class="my-3 font-16 fw-semibold">Sidebar Size</h5>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-default" value="default">
                                        <label class="form-check-label" for="leftbar-size-default">
                                             Default
                                        </label>
                                   </div>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small" value="condensed">
                                        <label class="form-check-label" for="leftbar-size-small">
                                             Condensed
                                        </label>
                                   </div>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-hidden" value="hidden">
                                        <label class="form-check-label" for="leftbar-hidden">
                                             Hidden
                                        </label>
                                   </div>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover-active" value="sm-hover-active">
                                        <label class="form-check-label" for="leftbar-size-small-hover-active">
                                             Small Hover Active
                                        </label>
                                   </div>

                                   <div class="form-check mb-2">
                                        <input class="form-check-input" type="radio" name="data-menu-size" id="leftbar-size-small-hover" value="sm-hover">
                                        <label class="form-check-label" for="leftbar-size-small-hover">
                                             Small Hover
                                        </label>
                                   </div>
                              </div>

                         </div>
                    </div>
               </div>
               <div class="offcanvas-footer border-top p-3 text-center">
                    <div class="row">
                         <div class="col">
                              <button type="button" class="btn btn-danger w-100" id="reset-layout">Reset</button>
                         </div>
                    </div>
               </div>
          </div>
     </div>
     <!-- ========== Topbar End ========== -->

     <!-- ========== App Menu Start ========== -->
     <div th:insert="~{fragments/admin/panel_menu.html}"></div>
     <!-- ========== App Menu End ========== -->

     <!-- ==================================================== -->
     <!-- Start right Content here -->
     <!-- ==================================================== -->
     <div class="page-content">

          <!-- Start Container Fluid -->
          <div class="container-xxl">
               <div class="row">
                    <div class="col-lg-3">
                         <div class="card">
                              <div class="card-body">
                                   <div class="d-flex align-items-center justify-content-between">
                                        <div>
                                             <h4 class="card-title mb-2 d-flex align-items-center gap-2">Admin</h4>
                                             <p class="text-muted fw-medium fs-22 mb-0" id="adminCount" th:text="${admin}">0</p>
                                        </div>
                                        <div>
                                             <div class="avatar-md bg-primary bg-opacity-10 rounded">
                                                  <iconify-icon icon="solar:users-group-two-rounded-bold-duotone" class="fs-32 text-primary avatar-title"></iconify-icon>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div>
                    <div class="col-lg-3">
                         <div class="card">
                              <div class="card-body">
                                   <div class="d-flex align-items-center justify-content-between">
                                        <div>
                                             <h4 class="card-title mb-2 d-flex align-items-center gap-2">Manager</h4>
                                             <p class="text-muted fw-medium fs-22 mb-0" id="managerCount" th:text="${manager}">0</p>
                                        </div>
                                        <div>
                                             <div class="avatar-md bg-primary bg-opacity-10 rounded">
                                                  <iconify-icon icon="solar:backpack-bold-duotone" class="fs-32 text-primary avatar-title"></iconify-icon>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div>
                    <div class="col-lg-3">
                         <div class="card">
                              <div class="card-body">
                                   <div class="d-flex align-items-center justify-content-between">
                                        <div>
                                             <h4 class="card-title mb-2 d-flex align-items-center gap-2">User</h4>
                                             <p class="text-muted fw-medium fs-22 mb-0" id="userCount" th:text="${user}">0</p>
                                        </div>
                                        <div>
                                             <div class="avatar-md bg-primary bg-opacity-10 rounded">
                                                  <iconify-icon icon="solar:rocket-2-bold-duotone" class="fs-32 text-primary avatar-title"></iconify-icon>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div>
                    <div class="col-lg-3">
                         <div class="card">
                              <div class="card-body">
                                   <div class="d-flex align-items-center justify-content-between">
                                        <div>
                                             <h4 class="card-title mb-2 d-flex align-items-center gap-2">Shipper</h4>
                                             <p class="text-muted fw-medium fs-22 mb-0" id="shipperCount" th:text="${shipper}">0</p>
                                        </div>
                                        <div>
                                             <div class="avatar-md bg-primary bg-opacity-10 rounded">
                                                  <iconify-icon icon="solar:notebook-bold-duotone" class="fs-32 text-primary avatar-title"></iconify-icon>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                         </div>
                    </div>

               </div>

               <div class="row">
                    <div class="col-xl-12">
                         <div class="card">
                              <div class="d-flex card-header justify-content-between align-items-center">
                                   <div>
                                        <h4 class="card-title">Danh S√°ch T·∫•t C·∫£ Ng∆∞·ªùi D√πng</h4>
                                   </div>
                                   <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-primary btn-sm" onclick="openAddUserModal()">
                                             <iconify-icon icon="mdi:account-plus" class="align-middle me-1"></iconify-icon>
                                             Th√™m User
                                        </button>
                                        <div class="dropdown">
                                             <a href="#" class="dropdown-toggle btn btn-sm btn-outline-light rounded" data-bs-toggle="dropdown" aria-expanded="false">
                                                  Th√°ng n√†y
                                             </a>
                                             <div class="dropdown-menu dropdown-menu-end">
                                                  <!-- item-->
                                                  <a href="#!" class="dropdown-item">T·∫£i xu·ªëng</a>
                                                  <!-- item-->
                                                  <a href="#!" class="dropdown-item">Xu·∫•t file</a>
                                                  <!-- item-->
                                                  <a href="#!" class="dropdown-item">Nh·∫≠p file</a>
                                             </div>
                                        </div>
                                   </div>
                              </div>
                              <div class="mb-3 d-flex gap-2 align-items-center">
                                   <input type="text" id="searchInput" class="form-control" placeholder="T√¨m theo t√™n ho·∫∑c email" onkeyup="searchPermissionTable()" style="width: 300px;">
                                   <select id="roleSelect" class="form-control" style="width: 200px;" onchange="filterByRole()">
                                        <option value="">T·∫•t c·∫£ vai tr√≤</option>
                                        <option value="admin">Qu·∫£n tr·ªã vi√™n</option>
                                        <option value="manager">Qu·∫£n l√Ω</option>
                                        <option value="user">Ng∆∞·ªùi d√πng</option>
                                        <option value="shipper">Ng∆∞·ªùi giao h√†ng</option>
                                   </select>
                                   <button type="button" class="btn btn-outline-primary btn-sm" onclick="clearFilter()">
                                        <iconify-icon icon="solar:refresh-bold-duotone" class="align-middle fs-18"></iconify-icon>
                                        X√≥a b·ªô l·ªçc
                                   </button>
                              </div>
                              <div>
                                   <div class="table-responsive">
                                        <table class="table align-middle mb-0 table-hover table-centered" id="userTable">
                                             <thead class="bg-light-subtle">
                                             <tr>
                                                  <th>ID</th>
                                                  <th>T√™n</th>
                                                  <th>Email</th>
                                                  <th>ƒê·ªãa ch·ªâ</th>
                                                  <th>S·ªë ƒëi·ªán tho·∫°i</th>
                                                  <th>Vai tr√≤</th>
                                                  <th>Thao t√°c</th>
                                             </tr>
                                             </thead>
                                             <!-- Tbody: R·ªóng ban ƒë·∫ßu, AJAX s·∫Ω append rows -->
                                             <tbody id="permissionTbody">
                                             <!-- Rows s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông b·ªüi jQuery -->
                                             </tbody>
                                        </table>

                                        <!-- Notification Area -->
                                        <div id="notification" class="alert alert-success" style="display: none;"></div>


                                   </div>
                                   <!-- end table-responsive -->
                              </div>
                              <div class="card-footer border-top">
                                   <nav aria-label="Page navigation example">
                                        <ul class="pagination justify-content-end mb-0" id="pagination">
                                             <!-- Pagination s·∫Ω ƒë∆∞·ª£c th√™m ƒë·ªông b·ªüi jQuery -->
                                        </ul>
                                   </nav>
                              </div>
                         </div>
                    </div>
               </div>
          </div>
     </div>
</div>
<!-- END Wrapper -->

<!-- Vendor Javascript (Require in all Page) -->
<script th:src="@{/assets/js/vendor.js}"></script>

<!-- App Javascript (Require in all Page) -->
<script th:src="@{/assets/js/app.js}"></script>

<script>
    function searchPermissionTable() {
        var input, filter, table, tr, td, i, txtValue, match;
        input = document.getElementById("searchInput");
        filter = input.value.toLowerCase();
        table = document.querySelector("#userTable");
        tr = table.getElementsByTagName("tr");

        for (i = 1; i < tr.length; i++) {
            tr[i].style.display = "none";
            td = tr[i].getElementsByTagName("td");
            match = false;

            if (td[1]) {
                txtValue = td[1].textContent || td[1].innerText;
                if (txtValue.toLowerCase().indexOf(filter) > -1) {
                    match = true;
                }
            }
            if (td[2]) {
                txtValue = td[2].textContent || td[2].innerText;
                if (txtValue.toLowerCase().indexOf(filter) > -1) {
                    match = true;
                }
            }

            if (match) {
                tr[i].style.display = "";
            }
        }
    }

    function filterByRole() {
        var selectedRole = document.getElementById("roleSelect").value;
        loadPermissions(0, selectedRole);
    }

    function clearFilter() {
        document.getElementById("searchInput").value = "";
        document.getElementById("roleSelect").value = "";
        loadPermissions(0, "");
    }
</script>

<!-- Script AJAX + jQuery: To√†n b·ªô script ƒë·∫ßy ƒë·ªß -->
<script>
    $(document).ready(function() {
        // B∆∞·ªõc 1: Load permissions v√† role stats qua AJAX khi trang load
        loadPermissions(0, "");
        loadRoleStats();
        
        // Function load permissions t·ª´ API (GET /api/permission)
        function loadPermissions(page, role) {
            var url = '/api/permission?page=' + page + '&size=10';
            if (role) {
                url += '&role=' + role;
            }
            
            // Th√™m loading effect
            $('#permissionTbody').addClass('loading');
            
            $.ajax({
                url: url,
                type: 'GET',
                dataType: 'json',
                success: function(response) {
                    // X√≥a loading effect
                    $('#permissionTbody').removeClass('loading');
                    console.log('Load permissions response:', response);
                    var users = response.content || response;
                    var tbody = $('#permissionTbody');
                    tbody.empty();
                    
                    if (users.length === 0) {
                        tbody.append('<tr><td colspan="7" class="text-center text-muted py-4">Kh√¥ng c√≥ d·ªØ li·ªáu ng∆∞·ªùi d√πng n√†o.</td></tr>');
                        return;
                    }
                    
                    // B∆∞·ªõc 2: Append rows ƒë·ªông t·ª´ JSON data
                    users.forEach(function(user) {
                        var roleBadge = getRoleBadge(user.roleName);
                        
                        var row = `
                            <tr data-user-name="${user.fullname.toLowerCase()}">
                                <td>${user.id || ''}</td>
                                <td>
                                    <p class="fs-15 mb-0 fw-semibold">${user.fullname || ''}</p>
                                </td>
                                <td>
                                    <p class="fs-15 mb-0">${user.email || ''}</p>
                                </td>
                                <td>
                                    <p class="fs-15 mb-0">${user.address || ''}</p>
                                </td>
                                <td>
                                    <p class="fs-15 mb-0">${user.phone || ''}</p>
                                </td>
                                <td>${roleBadge}</td>
                                <td>
                                    <div class="d-flex gap-2">
                                        <button type="button" class="btn btn-sm btn-soft-primary" onclick="openEditUserModal(${user.id})" title="S·ª≠a">
                                            <iconify-icon icon="solar:pen-2-bold-duotone"></iconify-icon>
                                        </button>
                                        <select class="form-select form-select-sm role-select" data-user-id="${user.id}" onchange="updateUserRole(${user.id}, this.value)" style="width: auto;">
                                            <option value="1" ${user.roleName === 'admin' ? 'selected' : ''}>Admin</option>
                                            <option value="2" ${user.roleName === 'manager' ? 'selected' : ''}>Manager</option>
                                            <option value="3" ${user.roleName === 'user' ? 'selected' : ''}>User</option>
                                            <option value="4" ${user.roleName === 'shipper' ? 'selected' : ''}>Shipper</option>
                                        </select>
                                    </div>
                                </td>
                            </tr>
                        `;
                        tbody.append(row);
                    });
                    
                    // Update pagination if response has pagination info
                    if (response.totalPages) {
                        updatePagination(response.number, response.totalPages, role);
                    }
                },
                error: function(xhr, status, error) {
                    // X√≥a loading effect
                    $('#permissionTbody').removeClass('loading');
                    console.log('Load permissions error:', xhr, status, error);
                    var tbody = $('#permissionTbody');
                    var msg = 'L·ªói load d·ªØ li·ªáu: ';
                    if (xhr.status === 401) {
                        msg += 'Ch∆∞a ƒëƒÉng nh·∫≠p. ƒêang chuy·ªÉn h∆∞·ªõng...';
                        setTimeout(function() { window.location.href = '/login'; }, 1000);
                    } else if (xhr.status === 403) {
                        msg += 'Kh√¥ng c√≥ quy·ªÅn truy c·∫≠p.';
                    } else if (xhr.status === 500) {
                        msg += 'L·ªói server. Vui l√≤ng th·ª≠ l·∫°i.';
                    } else if (xhr.status === 0) {
                        msg += 'Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server.';
                    } else {
                        msg += 'Status: ' + xhr.status + ' - Error: ' + error;
                    }
                    tbody.html('<tr><td colspan="7" class="text-center text-danger">' + msg + '</td></tr>');
                }
            });
        }
        
        // Helper functions
        function getRoleBadge(roleName) {
            if (!roleName) return '<span class="badge bg-secondary-subtle text-secondary">Ch∆∞a c√≥ vai tr√≤</span>';
            
            var badgeClass = 'bg-secondary-subtle text-secondary';
            var roleText = roleName;
            
            switch(roleName.toLowerCase()) {
                case 'admin': 
                    badgeClass = 'bg-danger-subtle text-danger'; 
                    roleText = 'Qu·∫£n tr·ªã vi√™n'; 
                    break;
                case 'manager': 
                    badgeClass = 'bg-warning-subtle text-warning'; 
                    roleText = 'Qu·∫£n l√Ω'; 
                    break;
                case 'user': 
                    badgeClass = 'bg-primary-subtle text-primary'; 
                    roleText = 'Ng∆∞·ªùi d√πng'; 
                    break;
                case 'shipper': 
                    badgeClass = 'bg-info-subtle text-info'; 
                    roleText = 'Ng∆∞·ªùi giao h√†ng'; 
                    break;
            }
            return `<span class="badge ${badgeClass}">${roleText}</span>`;
        }
        
        function updatePagination(currentPage, totalPages, role) {
            var pagination = $('#pagination');
            pagination.empty();
            
            if (totalPages <= 1) return;
            
            // Previous button
            var prevClass = currentPage === 0 ? 'disabled' : '';
            var prevClick = currentPage === 0 ? 'javascript:void(0);' : `loadPermissions(${currentPage - 1}, '${role}')`;
            pagination.append(`<li class="page-item ${prevClass}"><a class="page-link" href="${prevClick}">Tr∆∞·ªõc</a></li>`);
            
            // Page numbers
            for (var i = 0; i < totalPages; i++) {
                var activeClass = i === currentPage ? 'active' : '';
                var pageClick = i === currentPage ? 'javascript:void(0);' : `loadPermissions(${i}, '${role}')`;
                pagination.append(`<li class="page-item ${activeClass}"><a class="page-link" href="${pageClick}">${i + 1}</a></li>`);
            }
            
            // Next button
            var nextClass = currentPage === totalPages - 1 ? 'disabled' : '';
            var nextClick = currentPage === totalPages - 1 ? 'javascript:void(0);' : `loadPermissions(${currentPage + 1}, '${role}')`;
            pagination.append(`<li class="page-item ${nextClass}"><a class="page-link" href="${nextClick}">Ti·∫øp</a></li>`);
        }
        
        // Make loadPermissions globally accessible
        window.loadPermissions = loadPermissions;
        
        // Function to load role statistics
        function loadRoleStats() {
            $.ajax({
                url: '/api/permission/stats',
                type: 'GET',
                dataType: 'json',
                success: function(response) {
                    console.log('Role stats response:', response);
                    $('#adminCount').text(response.admin || 0);
                    $('#managerCount').text(response.manager || 0);
                    $('#userCount').text(response.user || 0);
                    $('#shipperCount').text(response.shipper || 0);
                },
                error: function(xhr, status, error) {
                    console.log('Load role stats error:', xhr, status, error);
                }
            });
        }
        
        // Make loadRoleStats globally accessible
        window.loadRoleStats = loadRoleStats;
    });

    // Function update user role (PUT /api/permission/{id}/role)
    function updateUserRole(userId, roleId) {
        if (!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën thay ƒë·ªïi vai tr√≤ c·ªßa ng∆∞·ªùi d√πng ID ' + userId + '?')) {
            return;
        }
        
        // Th√™m loading effect cho select
        var selectElement = event.target;
        var originalValue = selectElement.value;
        selectElement.disabled = true;
        
        $.ajax({
            url: '/api/permission/' + userId + '/role',
            type: 'PUT',
            contentType: 'application/json',
            data: JSON.stringify({
                userId: userId,
                roleId: parseInt(roleId)
            }),
            success: function(response) {
                // Kh√¥i ph·ª•c select
                selectElement.disabled = false;
                
                // Show success message
                $('#notification').removeClass('alert-danger').addClass('alert-success');
                $('#notification').text('Vai tr√≤ ƒë√£ ƒë∆∞·ª£c c·∫≠p nh·∫≠t th√†nh c√¥ng!');
                $('#notification').show();
                
                // Reload table and role statistics
                loadPermissions(0, document.getElementById("roleSelect").value);
                loadRoleStats();
                
                // Hide notification after 3 seconds
                setTimeout(function() {
                    $('#notification').hide();
                }, 3000);
            },
            error: function(xhr, status, error) {
                // Kh√¥i ph·ª•c select
                selectElement.disabled = false;
                selectElement.value = originalValue;
                
                console.log('AJAX Error:', xhr, status, error);
                var msg = 'L·ªói c·∫≠p nh·∫≠t: ';
                if (xhr.status === 404) {
                    msg += 'Ng∆∞·ªùi d√πng kh√¥ng t·ªìn t·∫°i.';
                } else if (xhr.status === 500) {
                    msg += xhr.responseText || 'L·ªói server.';
                } else if (xhr.status === 0) {
                    msg += 'Kh√¥ng th·ªÉ k·∫øt n·ªëi ƒë·∫øn server.';
                } else {
                    msg += 'Status: ' + xhr.status + ', Error: ' + error;
                }
                
                // Show error message
                $('#notification').removeClass('alert-success').addClass('alert-danger');
                $('#notification').text(msg);
                $('#notification').show();
                
                // Hide notification after 5 seconds
                setTimeout(function() {
                    $('#notification').hide();
                }, 5000);
            }
        });
    }
    
    // ========== USER MANAGEMENT FUNCTIONS ==========
    
    /**
     * Open Add User Modal
     */
    function openAddUserModal() {
        $('#userModalLabel').text('Th√™m User M·ªõi');
        $('#userForm')[0].reset();
        $('#userId').val('');
        $('#userModal').modal('show');
    }
    
    /**
     * Open Edit User Modal
     */
    function openEditUserModal(userId) {
        $('#userModalLabel').text('S·ª≠a Th√¥ng Tin User');
        
        // Load user data
        $.ajax({
            url: '/admin/api/user/' + userId,
            type: 'GET',
            success: function(response) {
                if (response.success && response.data) {
                    const user = response.data;
                    $('#userId').val(user.id);
                    $('#userFullname').val(user.fullname);
                    $('#userEmail').val(user.email);
                    $('#userPhone').val(user.phone);
                    $('#userAddress').val(user.address);
                    $('#userPassword').val(''); // Don't show password
                    $('#userPassword').attr('placeholder', 'ƒê·ªÉ tr·ªëng n·∫øu kh√¥ng ƒë·ªïi m·∫≠t kh·∫©u');
                    $('#userModal').modal('show');
                } else {
                    alert('Kh√¥ng th·ªÉ t·∫£i th√¥ng tin user!');
                }
            },
            error: function() {
                alert('L·ªói khi t·∫£i th√¥ng tin user!');
            }
        });
    }
    
    /**
     * Save User (Add or Edit)
     */
    function saveUser() {
        const userId = $('#userId').val();
        const isEdit = userId !== '';
        
        const userData = {
            fullname: $('#userFullname').val(),
            email: $('#userEmail').val(),
            phone: $('#userPhone').val(),
            address: $('#userAddress').val(),
            password: $('#userPassword').val()
        };
        
        // Validation
        if (!userData.fullname || !userData.email) {
            alert('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin b·∫Øt bu·ªôc!');
            return;
        }
        
        // For add: password is required
        if (!isEdit && !userData.password) {
            alert('Vui l√≤ng nh·∫≠p m·∫≠t kh·∫©u!');
            return;
        }
        
        const url = isEdit ? '/admin/api/user/update/' + userId : '/admin/api/user/create';
        const method = isEdit ? 'PUT' : 'POST';
        
        $.ajax({
            url: url,
            type: method,
            contentType: 'application/json',
            data: JSON.stringify(userData),
            success: function(response) {
                if (response.success) {
                    alert(isEdit ? 'C·∫≠p nh·∫≠t user th√†nh c√¥ng!' : 'Th√™m user th√†nh c√¥ng!');
                    $('#userModal').modal('hide');
                    loadPermissions(0, '');
                    loadRoleStats();
                } else {
                    alert('L·ªói: ' + (response.message || 'Kh√¥ng th·ªÉ l∆∞u user'));
                }
            },
            error: function(xhr) {
                let msg = 'L·ªói khi l∆∞u user!';
                try {
                    const response = JSON.parse(xhr.responseText);
                    msg = response.message || msg;
                } catch (e) {}
                alert(msg);
            }
        });
    }
    
</script>

<!-- User Add/Edit Modal -->
<div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="userModalLabel">Th√™m User M·ªõi</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="userForm">
                    <input type="hidden" id="userId">
                    
                    <div class="mb-3">
                        <label for="userFullname" class="form-label">H·ªç v√† t√™n <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="userFullname" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="userEmail" class="form-label">Email <span class="text-danger">*</span></label>
                        <input type="email" class="form-control" id="userEmail" required>
                    </div>
                    
                    <div class="mb-3">
                        <label for="userPassword" class="form-label">M·∫≠t kh·∫©u <span class="text-danger" id="passwordRequired">*</span></label>
                        <input type="password" class="form-control" id="userPassword" placeholder="Nh·∫≠p m·∫≠t kh·∫©u">
                        <small class="text-muted">T·ªëi thi·ªÉu 6 k√Ω t·ª±</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="userPhone" class="form-label">S·ªë ƒëi·ªán tho·∫°i</label>
                        <input type="tel" class="form-control" id="userPhone">
                    </div>
                    
                    <div class="mb-3">
                        <label for="userAddress" class="form-label">ƒê·ªãa ch·ªâ</label>
                        <textarea class="form-control" id="userAddress" rows="2"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                <button type="button" class="btn btn-primary" onclick="saveUser()">
                    <iconify-icon icon="solar:diskette-bold-duotone" class="align-middle me-1"></iconify-icon>
                    L∆∞u
                </button>
            </div>
        </div>
    </div>
</div>

</body>

</html>