<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<!-- CUSTOMER TESTIMONIALS FRAGMENT -->
<div th:fragment="testimonials" class="testimonials-section">
    <div class="container">
        <!-- Section Header -->
        <div class="row">
            <div class="col-md-12">
                <div class="section-heading text-center">
                    <h2>
                        <i class="fa fa-comments" style="color: #ee4d2d; margin-right: 10px;"></i>
                        ĐÁNH GIÁ TỪ KHÁCH HÀNG
                    </h2>
                    <p style="color: #666; font-size: 14px; margin-top: 8px;">
                        Hơn 50,000+ khách hàng tin tưởng và yêu thích
                    </p>
                </div>
            </div>
        </div>
        
        <!-- Testimonials Grid -->
        <div class="row testimonials-grid">
            <!-- Loop through testimonials from database -->
            <div class="col-lg-4 col-md-6 mb-4" th:each="testimonial : ${testimonials}">
                <div class="testimonial-card">
                    <div class="testimonial-header">
                        <div class="customer-avatar">
                            <img th:src="${testimonial.userAvatar != null && testimonial.userAvatar != '' ? testimonial.userAvatar : '/img/avatar-default.svg'}" 
                                 th:alt="${testimonial.userName}"
                                 onerror="this.onerror=null; this.src='/img/avatar-default.svg';">
                        </div>
                        <div class="customer-info">
                            <h4 th:text="${testimonial.userName}">Khách hàng</h4>
                            <p class="customer-location">
                                <i class="fa fa-map-marker"></i> Việt Nam
                            </p>
                        </div>
                    </div>
                    
                    <div class="testimonial-rating">
                        <!-- Display stars based on rating -->
                        <th:block th:each="i : ${#numbers.sequence(1, 5)}">
                            <i th:class="${i <= testimonial.star ? 'fa fa-star' : (i - 0.5 <= testimonial.star ? 'fa fa-star-half-o' : 'fa fa-star-o')}"></i>
                        </th:block>
                        <span class="rating-text" th:text="${testimonial.star + '.0'}">5.0</span>
                    </div>
                    
                    <div class="testimonial-content">
                        <p th:text="'&quot;' + ${testimonial.comment} + '&quot;'">"Rất hài lòng với sản phẩm!"</p>
                    </div>
                    
                    <div class="testimonial-footer">
                        <span class="product-purchased">
                            <i class="fa fa-shopping-bag"></i> <span th:text="${testimonial.productName}">Sản phẩm</span>
                        </span>
                        <span class="verified-badge">
                            <i class="fa fa-check-circle"></i> Đã mua hàng
                        </span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- View All Button -->
        <div class="row">
            <div class="col-md-12 text-center">
                <a href="#" class="btn-view-all-reviews">
                    Xem Tất Cả Đánh Giá
                    <i class="fa fa-arrow-right"></i>
                </a>
            </div>
        </div>
    </div>
</div>
</body>
</html>
